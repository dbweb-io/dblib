<?php 
//ini_set('display_errors', 1);ini_set('display_startup_errors', 1);error_reporting(E_ALL);
//error_reporting(0);
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
	Nome file --->   DBLib.php
	Versione Classe --->   1.0
	Autore --->   Davide Briscese - www.dbweb.io - info@dbweb.io - +39 3937454388
	 
	La classe contiene le funzioni master
	La classe è genitore
*/ 
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
class DBLib { 
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
	INDICE :
		Variabili -> Ambiente
		Costruttore
		0.1 -> Metodo Saluto : Saluto()
		0.2 -> Metodo Stampa Array : function StampaArray($dati)
		0.3 -> Metodo Stampa (Debug) : function Stampa($dato,$etichetta ='')
		0.4 -> Stringa Random
		
	METODI ARCHIVIATI


*/
/////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// Variabili -> Ambiente 
//
	const version = '1.0.0';
	
    private $io = "DBLib";
    private $vedi_output =0;
    protected $percorso;
    protected $data;
    protected $ora;
// 
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// Costruttore 
//
    public function __construct() {
		setlocale(LC_TIME, "it_IT");
		date_default_timezone_set("Europe/Rome");
		$this->percorso = getcwd();
		$this->data= date('d/m/Y');
		$this->ora= date('H:i:s');
		$this->datacompleta= date('Y/m/d H:i:s');
	}
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.1 -> Metodo Saluto 
//
    function Saluto(){echo "Ciao Davide sono la classe $this->io<br>Oggi è il $this->data e sono le $this->ora";}     
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.2 -> Metodo Stampa Array 
//
    function StampaArray($dati){
    	if($this->vedi_output == 1){
    		echo "<pre>";print_r($dati);echo "</pre>";
    	}
    }     
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.3 -> Metodo Stampa (Debug) 
//
    function Stampa($dato,$etichetta =''){
    	if($this->vedi_output == 1){
    		if (strlen($etichetta) > 0){echo "\n <br> $etichetta -> ".$dato;}
    		else {echo "\n <br>".$dato;}
    	}
    }     
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.4 -> Stringa Random 
//
	function StringaRandom($length = 10) {
		$str = "";
		$characters = array_merge(range('A','Z'), range('a','z'), range('0','9'));
		$max = count($characters) - 1;
		for ($i = 0; $i < $length; $i++) {
			$rand = mt_rand(0, $max);
			$str .= $characters[$rand];
		}
		return $str;
	}   
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.4 -> Stringa Random 
//
	function DifferenzaDate($data_iniziale,$data_finale,$unita) {

		$data1 = strtotime($data_iniziale);
		$data2 = strtotime($data_finale);
	 
		switch($unita) {
			case "s": $unita = 1/3600; break; 	//SECONDI
			case "m": $unita = 1/60; break; 	//MINUTI
			case "h": $unita = 1; break;		//ORE
			case "g": $unita = 24; break;		//GIORNI
			case "a": $unita = 8760; break;         //ANNI
		}
	 
		$differenza = (($data2-$data1)/3600)/$unita;

		return $differenza;
	}   
//
//////////////////////////////////////////////////////////////////////////////////////////////////





/*
METODI ARCHIVIATI - INIZIO
////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.5 -> Pivot
//
    function Pivot($op,$dati){
	// In base all'operazione richiesta, richiamo l'operazione relativa
			switch ($op){
				default:return $this->DevPivotError($dati);break;
				case "Connetti":return $this->Connetti($dati);break;
				case "Konnetti":return $this->Konnetti($dati);break;
				case "UploadFileBaseSatellite":return $this->UploadFileBaseSatellite($dati);break;
				case "RegistraWp":return $this->RegistraWp($dati);break;
			} 
	}     
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.6 -> DefPivotError
//
    function DevPivotError($dati){
    	$uscita = array("posta"=>"Che metodo è ???","orsa"=>0);
    	return $uscita;    	
    }
//
//////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////
// 0.7 -> DatiInClasse
//
    function DatiInClasse($dati){
		$this->nome = $dati['nome_sito'];
		$this->categoria = $dati['categoria_gruppo'];
		$this->host = $dati['host_ftp'];
		$this->user = $dati['nome_utente_ftp'];
		$this->pass = $dati['password_ftp'];
		$this->skey= $this->StringaRandom();
    }   
//
//////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////
METODI ARCHIVIATI - FINE
*/


/////////////////////////////////////////////////////////////////////////////////////////////////////////////
}/* Auto  $DBLib = new DBLib(); */
/////////////////////////////////////////////////////////////////////////////////////////////////////////////



